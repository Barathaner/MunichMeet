(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7676:(e,t,n)=>{Promise.resolve().then(n.bind(n,3624))},6046:(e,t,n)=>{"use strict";var o=n(6658);n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})},6803:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(5155),l=n(2223);function a(){let{points:e,name:t}=(0,l.a)();return(0,o.jsxs)("div",{className:"absolute bottom-2 left-2 pointer-events-none p-2 bg-gradient-to-r from-yellow-400 to-orange-400 text-black rounded-md shadow-md z-50 font-mono",children:[(0,o.jsx)("h1",{className:"text-sm font-bold text-center",children:"MingaCoins"}),(0,o.jsx)("div",{className:"flex items-center justify-center",children:(0,o.jsx)("p",{className:"text-2xl font-bold",children:e})})]})}},2223:(e,t,n)=>{"use strict";n.d(t,{UserPointsProvider:()=>s,a:()=>r});var o=n(5155),l=n(2115);let a=(0,l.createContext)(),r=()=>(0,l.useContext)(a),s=e=>{let{children:t}=e,[n,r]=(0,l.useState)(0),[s,i]=(0,l.useState)("MunichMeet");return(0,o.jsx)(a.Provider,{value:{points:n,addPoints:e=>r(t=>t+e),resetPoints:()=>r(0),name:s},children:t})}},3624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g});var o=n(5155),l=n(2115),a=n(9990),r=n.n(a);n(8689);var s=n(2223),i=n(6046);function c(e){let{event:t,onClose:n}=e;return(0,o.jsx)("div",{className:"modal",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsx)("span",{className:"close",onClick:n,children:"\xd7"}),(0,o.jsx)("h2",{children:t.title}),(0,o.jsx)("p",{children:t.description}),(0,o.jsx)("p",{children:t.date}),(0,o.jsx)("p",{children:t.location})]})})}var d=n(6803),u=n(2818);function g(){let e=(0,i.useRouter)(),[t,n]=(0,l.useState)(!0),[a,g]=(0,l.useState)([]),[h,m]=(0,l.useState)({lat:null,lng:null});async function p(){let e=await fetch("http://localhost:8000/api/getallevents",{method:"GET",headers:{"Content-Type":"application/json"}});return await e.json()}(0,l.useEffect)(()=>{(async()=>{try{let e=await p();console.log(e)}catch(e){console.error("Error fetching events:",e)}})(),console.log(a)},[]);let{points:x,addPoints:f,resetPoints:v,name:b}=(0,s.a)();return(0,l.useEffect)(()=>{var e;r().accessToken=u.env.NEXT_PUBLIC_API_KEY,navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:n}=e.coords;m({lat:t,lng:n})},e=>console.error("Error retrieving location:",e),{enableHighAccuracy:!0}):console.error("Geolocation is not supported by this browser.");let t=function(){if(null==h.lat||null==h.lng)return new(r()).Map({container:"map",style:"mapbox://styles/mapbox/navigation-night-v1",center:[h.lat,h.lng],zoom:15.5,pitch:45,bearing:-17.6,antialias:!0})}();t.on("style.load",()=>(function(e){let t=e.getStyle().layers.find(e=>"symbol"===e.type&&e.layout["text-field"]).id;e.addLayer({id:"add-3d-buildings",source:"composite","source-layer":"building",filter:["==","extrude","true"],type:"fill-extrusion",minzoom:15,paint:{"fill-extrusion-color":"#aaa","fill-extrusion-height":["interpolate",["linear"],["zoom"],15,0,15.05,["get","height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],15,0,15.05,["get","min_height"]],"fill-extrusion-opacity":.6}},t)})(t)),t.addControl(new(r()).NavigationControl);let n=(e=function(e){let t=document.createElement("div");return t.style.backgroundImage="url('/usermarker.png')",t.style.width="70px",t.style.height="70px",t.style.backgroundSize="contain",t.style.backgroundRepeat="no-repeat",t.style.borderRadius="50%",new(r()).Marker({element:t}).setLngLat([h.lng,h.lat]).addTo(e)}(t),setInterval(()=>{m(n=>{let o=n.lat+9e-6,l=n.lng+1e-5;return isNaN(o)||isNaN(l)?(console.error("Invalid position:",{lat:o,lng:l}),n):(e.setLngLat([l,o]),t.isMoving()||t.easeTo({center:[l,o],duration:1e3,easing:e=>e}),{lat:o,lng:l})})},1e3));return()=>{clearInterval(n),t.remove()}},[]),(0,o.jsxs)("div",{className:"h-screen flex flex-col relative",children:[(0,o.jsx)("div",{id:"map",className:"flex-1"}),(0,o.jsx)("div",{className:"absolute top-3 left-1/2 transform -translate-x-1/2 pointer-events-none z-50",children:(0,o.jsx)("img",{src:"/logo.png",alt:"Logo",className:"w-24 h-24 object-contain rounded-full"})}),t&&(0,o.jsx)(c,{event:{title:"dddd",description:"iudshfiu",date:"12.92.23",location:"kasjdi"},setShowEvent:n}),(0,o.jsx)(d.A,{}),(0,o.jsx)("button",{onClick:()=>e.push("/scan"),className:"absolute bottom-2 right-4 z-50 w-16 h-16  p-0 bg-yellow-400 hover:opacity-25",style:{border:"none",cursor:"pointer"},children:(0,o.jsx)("img",{src:"/qrcodebutton.png",alt:"QR Code Button",className:"w-full h-full object-contain"})})]})}},8689:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[168,240,441,517,358],()=>t(7676)),_N_E=e.O()}]);